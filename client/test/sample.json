{"items":[{"answers":[{"owner":{"reputation":5424,"user_id":492325,"accept_rate":100},"is_accepted":false,"score":1,"last_activity_date":1383842707,"creation_date":1383842707,"answer_id":19841691,"question_id":19838409,"link":"http://stackoverflow.com/questions/19838409/grunt-grunfile-js-and-grunt-watch/19841691#19841691","body":"<p>I've reformatted your code, and you should see now that you've placed the watch config within the compass config object, which is not correct.</p>\n\n<p>Also, why have you included this code:?</p>\n\n<pre><code>grunt.registerTask('watch', ['watch']);\ngrunt.loadTasks('watch');\n</code></pre>\n\n<p>Possibly that could be causing some issues as well, I suggest removing that. </p>\n"}],"tags":["gruntjs","grunt-contrib-watch","grunt-contrib-compass"],"owner":{"reputation":46,"user_id":2505665,"accept_rate":69},"is_answered":true,"view_count":3099,"answer_count":1,"score":1,"last_activity_date":1383842707,"creation_date":1383834445,"last_edit_date":1383842339,"question_id":19838409,"link":"http://stackoverflow.com/questions/19838409/grunt-grunfile-js-and-grunt-watch","title":"Grunt grunfile.js and grunt watch","body":"<p>** I want to be able to use Compass but Grunt watch doesn't work and give me strange errors:**</p>\n\n<pre><code>Running \"watch\" task\nWaiting...Verifying property watch exists in config...ERROR\n&gt;&gt; Unable to process task.\nWarning: Required config property \"watch\" missing.\n\n/Applications/MAMP/htdocs/davide77.bitbucket.org/sky-route-1/node_modules/grunt-contrib-compass/node_modules/tmp/lib/tmp.js:261\n  throw err;\n        ^\nRangeError: Maximum call stack size exceeded\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>module.exports = function (grunt) {\n\n  // Project configuration.\n  grunt.initConfig({\n\n    pkg: grunt.file.readJSON('package.json'),\n\n    compass: {\n\n      dev: {\n        src: 'sass',\n        dest: 'stylesheets',\n        outputstyle: 'expanded',\n        linecomments: true,\n        forcecompile: true,\n        require: [\n          'animate-sass',\n          'mylib'\n        ],\n        debugsass: true,\n        images: '/assets/images',\n        relativeassets: true\n      },\n      prod: {\n        src: 'sass',\n        dest: 'stylesheets',\n        outputstyle: 'compressed',\n        linecomments: false,\n        forcecompile: true,\n        require: [\n          'animate-sass',\n          'mylib'\n        ],\n        debugsass: false,\n        images: '/assets/images',\n        relativeassets: true\n      },\n      dist: {\n        src: 'sass',\n        dest: 'stylesheets',\n        outputstyle: 'compressed',\n        linecomments: false,\n        forcecompile: true,\n        require: [\n          'animate-sass',\n          'mylib'\n        ],\n        debugsass: false,\n        images: '/assets/images',\n        relativeassets: true\n      },\n\n      watch: { // for development run 'grunt watch'\n        compass: {\n          files: ['sass/*.scss'],\n          tasks: ['compass:dev']\n        }\n      }\n    }\n  });\n\n  // Default task(s). \n\n  //grunt.registerTask('default', 'compass:dev');\n\n  grunt.registerTask('watch', ['watch']);\n  grunt.loadTasks('watch');\n\n  grunt.loadNpmTasks('grunt-contrib-watch');\n  grunt.loadNpmTasks('grunt-contrib-compass');\n  grunt.registerTask('default', ['compass']);\n};\n</code></pre>\n"},{"tags":["gruntjs"],"owner":{"reputation":17,"user_id":2551428,"accept_rate":75},"is_answered":false,"view_count":222,"answer_count":0,"score":0,"last_activity_date":1400275784,"creation_date":1389474944,"question_id":21067975,"link":"http://stackoverflow.com/questions/21067975/grunt-watch-command","title":"Grunt Watch command","body":"<p>Trying to set up Grunt with Roots Bootstrap Starter Template - Installation of grunt seemed to go perfectly fine - but when I run 'grunt watch' and go to change my .less files nothing happens in the terminal and grunt doesn't compile my changes. Here is my terminal output after installing > running grunt > and then running 'grunt watch'.</p>\n\n<pre><code>Jeffs-MacBook-Air:roots-master jeffsee55$ grunt\nRunning \"clean:dist\" (clean) task\nCleaning assets/css/main.min.css...OK\nCleaning assets/js/scripts.min.js...OK\n\nRunning \"less:dist\" (less) task\nFile assets/css/main.min.css created.\n\nRunning \"uglify:dist\" (uglify) task\nFile \"assets/js/scripts.min.js\" created.\n\nRunning \"version\" task\nVersioning assets/css/main.min.css...OK\nVersioning assets/js/scripts.min.js...OK\n\"lib/scripts.php\" updated with new CSS/JS versions.\n\nDone, without errors.\nJeffs-MacBook-Air:roots-master jeffsee55$ grunt watch\nRunning \"watch\" task\nWaiting...\n</code></pre>\n\n<p>As I said, I then go to make changes to anything in ANY of my .less files which are located in assets/less. Any tips on troubleshooting? Perhaps reinstalling EVERYTHING including node.js?</p>\n"},{"answers":[{"owner":{"reputation":3,"user_id":3629734},"is_accepted":false,"score":0,"last_activity_date":1418394879,"creation_date":1418394879,"answer_id":27445878,"question_id":27443188,"link":"http://stackoverflow.com/questions/27443188/grunt-watch-and-stylus/27445878#27445878","body":"<p>I solved by myself, but i can't figure what was the error.</p>\n\n<pre><code>pkg: grunt.file.readJSON('package.json'),\n\n        stylus: {\n            all: {\n                options: {\n                      paths: ['stylus'],\n\n                      import: [      //  @import 'foo', 'bar/moo', etc. into every .styl file\n                        'nib/*'\n                      ]\n                    },\n                    files: {\n                      'css/style.css': 'stylus/style.styl', // 1:1 compile\n                    },\n            },\n        },\n\n        watch: {\n            files: [\n                'stylus/*.styl',\n            ],\n            tasks: ['stylus:all'],\n        }\n      });\n</code></pre>\n"},{"owner":{"reputation":4479,"user_id":1985406},"is_accepted":true,"score":1,"last_activity_date":1418395026,"creation_date":1418395026,"answer_id":27445914,"question_id":27443188,"link":"http://stackoverflow.com/questions/27443188/grunt-watch-and-stylus/27445914#27445914","body":"<p>Well, in your original code you are using the option <code>task</code> when <a href=\"https://github.com/gruntjs/grunt-contrib-watch#tasks\" rel=\"nofollow\">it should be <code>tasks</code></a> (plural). That would be my first guess.</p>\n\n<pre><code>watch: {\n  stylus: {\n    files: ['*/*.*'],\n    tasks: ['stylus:compile'],   // This needs to be \"tasks\" (not \"task\")\n    options : { livereload: true },\n  },\n},\n</code></pre>\n\n<p>I also don't think you need the <code>newer</code> bit in front.</p>\n"}],"tags":["javascript","gruntjs","stylus"],"owner":{"reputation":3,"user_id":3629734},"is_answered":true,"view_count":529,"accepted_answer_id":27445914,"answer_count":2,"score":0,"last_activity_date":1418395026,"creation_date":1418385505,"last_edit_date":1418394885,"question_id":27443188,"link":"http://stackoverflow.com/questions/27443188/grunt-watch-and-stylus","title":"grunt watch and stylus","body":"<p>can't figure how nesting grunt <strong>watch</strong> and <strong>stylus</strong> compiler (livereload will come later)</p>\n\n<p>I tried also using the \"new\" grunt newer, but there must be something wrong in my code.</p>\n\n<p>Any suggestion?</p>\n\n<pre><code>grunt.initConfig({\n\n  stylus: {\n    compile: {\n      options: {\n        paths: ['stylus'],\n\n        import: [      \n          'nib/*'\n        ]\n      },\n      files: {\n        'css/style.css': 'stylus/style.styl', \n      },\n    },\n\n  },\n  watch: {\n    stylus: {\n      files: ['*/*.*'],\n      task: ['newer:stylus:compile'],\n      options : { livereload: true },\n    },\n  },\n\n});\n\n\ngrunt.loadNpmTasks('grunt-contrib-stylus');\ngrunt.loadNpmTasks('grunt-contrib-watch');\ngrunt.loadNpmTasks('grunt-newer');\n\ngrunt.registerTask('compile', ['newer:stylus:all']);\n</code></pre>\n\n<p>Also, if i run <code>grunt watch</code>, it works good but do nothing.\nAnd, if i run <code>grunt stylus</code>, it compile my css perfectly.</p>\n"},{"answers":[{"owner":{"reputation":6223,"user_id":1056711,"accept_rate":83},"is_accepted":true,"score":1,"last_activity_date":1414505792,"creation_date":1414505792,"answer_id":26610627,"question_id":26590333,"link":"http://stackoverflow.com/questions/26590333/dynamic-grunt-watch-configuration/26610627#26610627","body":"<p>edit your watch task to run the <code>less:compileTheme</code>-task without themeName, and watch all less files in your themes folder:</p>\n\n<pre><code>watch: {\n    themeCss: {\n        files: \"app/less/themes/**/*.less\",\n        tasks: [\"less:compileTheme\"],\n        options: {\n          spawn: false\n        }\n    }\n}\n</code></pre>\n\n<p>now you can add a watch event-handler where you get the changed file. extract the themeName, and configure your less-task:</p>\n\n<pre><code>grunt.event.on('watch', function(action, filepath) {\n  var themeName = filepath.split('/')[3];\n  grunt.config('less.compileTheme.files', {\n    \"public/themes/\" + themeName + \"/css/styles.css\": \"app/less/themes/\" + themeName + \"/styles.less\"\n  });\n});\n</code></pre>\n\n<p>of course the detection of your themeName should be more reliable, but i think you get the idea on how to do dynamic watching!</p>\n"}],"tags":["javascript","css","gruntjs","grunt-contrib-watch","grunt-contrib-less"],"owner":{"reputation":481,"user_id":1308734,"accept_rate":71},"is_answered":true,"view_count":98,"accepted_answer_id":26610627,"answer_count":1,"score":0,"last_activity_date":1414505792,"creation_date":1414421581,"question_id":26590333,"link":"http://stackoverflow.com/questions/26590333/dynamic-grunt-watch-configuration","title":"Dynamic Grunt Watch configuration","body":"<p>My site file structure is something like this:</p>\n\n<pre><code>app\n    less\n        themes\n            default\n            modern\n            etc\npublic\n    themes\n        default\n            css\n        modern\n            css\n        etc\n</code></pre>\n\n<p>So <code>/app/less/themes/{{ themeName }}/*.less</code> will compile into <code>/public/themes/{{ themeName }}/css/*.css</code>.</p>\n\n<p>I have my Grunt Less task set up dynamically and working fine.\nExample: <code>grunt less:compileTheme:modern</code></p>\n\n<pre><code>less: {\n  compileTheme: {\n    options: {\n      compress: false,\n      yuicompress: false,\n      optimization: 2,\n      sourceMap: true,\n      sourceMapFilename: \"public/themes/&lt;%= grunt.task.current.args[0] %&gt;/css/styles.css.map\",\n      sourceMapURL: \"/themes/&lt;%= grunt.task.current.args[0] %&gt;/css/styles.css.map\"\n    },\n    files: {\n      \"public/themes/&lt;%= grunt.task.current.args[0] %&gt;/css/styles.css\": \"app/less/themes/&lt;%= grunt.task.current.args[0] %&gt;/styles.less\"\n    }\n  }\n}\n</code></pre>\n\n<p>But I'm not sure how to get the Grunt Watch task working. Ideally, it'll see the theme folder name and run the grunt task as <code>grunt less:compileTheme:{{ themeName }}</code>:</p>\n\n<pre><code>watch: {\n    themeCss: {\n        files: \"app/less/themes/{{ themeName }}/**/*.less\",\n        tasks: [\"less:compileTheme:{{ themeName }}\"],\n        options: {\n          spawn: false\n        }\n    }\n}\n</code></pre>\n\n<p>Is this possible? And/or is there a better way I should be doing this?</p>\n"},{"tags":["gruntjs","less","watch"],"owner":{"reputation":1,"user_id":3358138},"is_answered":false,"view_count":85,"answer_count":0,"score":0,"last_activity_date":1409915022,"creation_date":1409913686,"last_edit_date":1409915022,"question_id":25684032,"link":"http://stackoverflow.com/questions/25684032/grunt-watch-command-not-working","title":"grunt watch command not working","body":"<p>my grunt watch task is running, but no changes in .less files are recognized:\nhere is my grunt file.js:</p>\n\n<pre><code>    module.exports = function(grunt) {\n    grunt.initConfig({\n        // running `grunt less` will compile once\n        less: {\n            development: {\n                options: {\n                    compress: false,\n                    yuicompress: false,\n                },\n                files: {\n                    \"public/css/styles.css\": \"src/less/styles.less\"\n                }\n            },\n            production: {\n                options: {\n                    compress: true,\n                    yuicompress: true,\n                    optimization: 2,\n                },\n                files: {\n                    \"public/css/styles.min.css\": \"src/less/styles.less\"\n                }\n            }\n        },\n        // running `grunt watch` will watch for changes\n        watch: {\n            files: \"src/less/*.*/*.less\",\n            tasks: [\"less\"]\n        }\n    });\n    grunt.loadNpmTasks('grunt-contrib-less');\n    grunt.loadNpmTasks('grunt-contrib-watch');\n    grunt.registerTask('default', ['watch']);\n};\n</code></pre>\n\n<p>Can someone give me a hint, please. Manual trigger of <code>grunt less</code> works fine.</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":246}